<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{header :: html_header}">

<body>
<header th:replace="header :: my-header"></header>

    <section class="breadcrum">

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb container">
                <li class="breadcrumb-item"><a href="./index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Tài khoản</li>
                <li class="breadcrumb-item active" aria-current="page">Thông tin cá nhân</li>
            </ol>
        </nav>
    </section>
    <div class="container main-infor">
        <h1 class="text-center">THÔNG TIN CÁ NHÂN</h1>
        <div class="row profile">
            <div class="col-md-3 mt-50 mb-50">
                <div class="profile-sidebar">
                    <div class="profile-userpic"> <img
                            src="https://hocwebgiare.com/thiet_ke_web_chuan_demo/bootstrap_user_profile/images/profile_user.jpg"
                            class="img-responsive " alt="Thông tin cá nhân">

                    </div>
                    <div class="profile-usertitle">
                        <div class="profile-usertitle-name" th:utext="${userInfo.getName()}"> </div>
                        <div class="profile-usertitle-job"><label th:utext="${userInfo.email}"></label></div>
                    </div>
                    <div class="profile-userbuttons">
                        <button type="button" class="btn btn-success btn-sm"> <a th:href="@{/home}">Trang
                                chủ</a></button>
                        <button type="button" class="btn btn-danger btn-sm"><a th:href="@{/logout}">Thoát ra</a></button>
                    </div>
                </div>
            </div>
            <div class="col-md-9 mt-50 mb-50">
                <div class=" personal-infor ">
                    <div class="col-md-8 col-sm-6 pt-3">
                        <table>
                            <tbody>
                                <tr>
                                    <td> <label for="formGroupExampleInput" class="name-infor">Họ Tên:</label> </td>
                                    <td class="display-userName">
                                        <label type="text" class="form-control" id="formGroupExampleInput"
                                               placeholder="Họ tên"  th:utext="${userInfo.firstName+' '+userInfo.lastName}"></label>
                                    </td>
                                    <td> <button type="submit" id="btn-edit" for="formGroupExampleInput"
                                            class="btn btn-warning ml-10">Chỉnh sửa</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="mt-3 filed-phone">
                            <tbody>
                            <tr  >
                                <td> <label for="formGroupExampleInput" class="phone-infor">Số điện thoại:</label> </td>
                                <td class="display-userPhone">
                                    <label type="number" max="10" class="form-control" id="formGroupExampleInput"
                                           placeholder="Số điện thoại" th:text="${userInfo.phoneNumber}"></label>
                                </td>


                            </tr>

                            </tbody>
                        </table>
                        <table class="mt-3  filed-address">
                            <tbody>
                            <tr >
                                <td> <label for="formGroupExampleInput" class="address-infor">Địa chỉ:</label> </td>
                                <td class="display-userPhone">
                                    <label type="text" max="10" class="form-control" id="formGroupExampleInput"
                                           placeholder="Địa chỉ" th:text="${userInfo.address}"></label>
                                </td>

                            </tr>

                            </tbody>
                        </table>
                        <form th:action="@{'/user/edit-user/'}" method="post" th:object="${userInfo}">
                        <div class="hidden-edit pt-3">
                            <div class="form-group ">
                                <label for="inputName" class="col-sm-6 col-form-label">Tên</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control appear-input mb-3 " id="inputName"
                                        placeholder="FirstName" aria-label="First name" th:field="*{firstName}">

                                </div>
                            </div>

                            <div class="form-group ">
                                <label for="inputName" class="col-sm-6 col-form-label">Họ</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control appear-input mb-3 " id="inputName"
                                        placeholder="LastName" aria-label="First name" th:field = "*{lastName}">

                                </div>
                            </div>
                            <div class="form-group ">
                                <label for="inputName" class="col-sm-6 col-form-label">Số điện thoại</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control appear-input mb-3 " id="inputName"
                                           placeholder="PhoneNumber" aria-label="First name" th:field="*{phoneNumber}">

                                </div>
                            </div>
                            <div class="form-group ">
                                <label for="inputName" class="col-sm-6 col-form-label">Địa chỉ</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control appear-input mb-3 " id="inputName"
                                           placeholder="Address" aria-label="First name" th:field="*{address}">

                                </div>
                            </div>
<!--                            <label for="inputName" class="col-sm-6 col-form-label" th:field="*{email}" th:value="*{email}">Tên</label>-->
                            <button type="submit" class="btn btn-secondary updated-infor ml-10 mt-25">Cập nhật</button>
                            <button type="reset" class="btn btn-secondary exit ml-10 mt-25">Hủy</button>
                        </div>
                        </form>
                    </div>

                    <div class="col-md-8 col-sm-6 pt-4">
                        <table>
                            <tbody>
                                <tr>
                                    <td id="display-userName-2"><label for="inputpass" class="form-label">Email:</label>
                                    </td>
                                    <td>
                                        <label type="email" required class="form-control" id="inputpass"
                                               placeholder="Mật khẩu" th:utext="${userInfo.email}"></label>
                                    </td>

                                </tr>
                            </tbody>
                        </table>

                    </div>

                    <div class="col-md-8 col-sm-6 pt-4 pb-4">
                        <table>
                            <tbody>
                                <tr>
                                    <td><label for="inputpass" class="form-label pass-infor">Mật khẩu:</label></td>
                                    <td class="display-userName-3">
                                        <label type="password" required class="form-control" id="inputpass"
                                               placeholder="Mật Khẩu" th:utext="'****************'"></label>
                                    </td>
                                    <td> <button type="submit" id="btn-edit-2" class="btn btn-warning ml-10">Chỉnh
                                            sửa</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <form th:object="${checkpassword}" th:action="@{/user/edit-password}" method="post">
                            <div class=" hidden-pass pt-3">
                                <div class="form-group ">
                                    <label for="inputName" class="col-sm-6 col-form-label">Nhập mật khẩu cũ:</label>
                                    <div class="col-sm-10">
                                        <input type="password" required class="form-control appear-input mb-3 " id="inputName"
                                               placeholder="Old Password" th:field="${checkpassword.oldPassword}">

                                    </div>
                                </div>

                                <div class="form-group ">
                                    <label for="inputName" class="col-sm-6 col-form-label">Nhập mật khẩu mới</label>
                                    <div class="col-sm-10">
                                        <input type="password" required class="form-control appear-input mb-3 " id="password"
                                               placeholder="New Password" aria-label="First name" th:field="${checkpassword.newPassword}">

                                    </div>
                                </div>
                                <div class="form-group ">
                                    <label for="inputpass" class="col-sm-6 col-form-label">Xác nhận lại mật khẩu</label>


                                    <input type="password" class="form-control appear-input mb-3 "  id="password_confirm" oninput="check(this)"
                                           placeholder="Confirm Password" aria-label="First name" th:field="${checkpassword.confirmPassword}">
                                </div>
                                <button type="submit" class="btn btn-secondary updated-infor ml-10 mt-25">Cập nhật</button>
                                <button type="button" class="btn btn-secondary exit-pass ml-10 mt-25">Hủy</button>
                            </div>

                        </form>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div class="amm-shopping-cart-wrapper">
        <div class="amm-shopping-cart-canvas">
            <div class="amm-shopping_cart">
                <div class="amm-shopping_cart-top-bar d-flex justify-content-between">
                    <h6 col-sm-6>Giỏ hàng</h6>
                        <button class="amm-shopping-cart-close">
                            <i class="fas fa-times"></i>
                        </button>
                </div><!-- shopping cart top bar -->
                <div class="amm-shopping_cart-list-items mt-30">
                    <ul>

                    </ul>
                </div> <!-- shopping_cart list items -->
                <div class="amm-shopping_cart-btn">
                    <div class="total pt-35 d-flex justify-content-between">
                        <h5>Tổng tiền:</h5>
                        <p>0 <span>đ</span></p>

                    </div>
                    <div class="cart-btn pt-25">
                        <a class="main-btn" href="./ViewCart.html">Xem giỏ hàng</a>
                        <a class="main-btn main-btn-2" href="./payment.html">Thanh toán</a>
                    </div>
                </div>
            </div> <!-- shopping_cart -->
        </div>
        <div class="overlay"></div>
    </div>

    <footer>
        <div class="main-footer container mt-50">
            <div class="row m14 container">
                <div class="col-md-4 col-sm-6 col-xs-12">
                    <div class="text-footer">
                        <h4>Giới thiệu</h4>
                        <p>OrFarm là trang web bán nông sản sạch của Việt Nam. Nguồn nông sản tươi sạch, nhiều chất dinh
                            dưỡng, giá cả phải chăng và đặc biệt là được cấp giấy chứng nhận về sản phẩm sạch là nguồn
                            cảm hứng để chúng tôi tiếp tục đưa sản phẩm
                            đến với người Việt.
                        </p>
                        <div class="logo-1">
                            <img class="w-100" src="img/logo_bct_019590229b4c4dfda690236b67f7aff4.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12">
                    <div class="text-footer">
                        <h4>Liên kết</h4>
                        <p><a href="#">Tìm kiếm</a></p>
                        <p><a href="#">Giới thiệu</a> </p>
                        <p><a href="#">Chính sách đổi trả</a></p>
                        <p><a href="#">Chính sách bảo mật</a></p>
                        <p><a href="#">Điều khoản dịch vụ</a></p>
                        <p><a href="#">Liên hệ</a></p>

                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="text-footer ">
                        <h4>Thông tin liên hệ</h4>
                        <div class="d-flex">
                            <span class="mr-2"><svg class="svg-inline--fa fa-map-marker-alt fa-w-12" aria-hidden="true"
                                    focusable="false" data-prefix="fas" data-icon="map-marker-alt" role="img"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" data-fa-i2svg="">
                                    <path fill="currentColor"
                                        d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z">
                                    </path>
                                </svg><!-- <i class="fas fa-map-marker-alt"></i> --></span>
                            <p>Tầng 1, toà B3, Làng quốc tế Thăng Long, Trần Đăng Ninh, Quận Cầu Giấy.</p>
                        </div>
                        <div class="d-flex">
                            <span class="mr-2"><svg class="svg-inline--fa fa-phone-alt fa-w-16" aria-hidden="true"
                                    focusable="false" data-prefix="fas" data-icon="phone-alt" role="img"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                    <path fill="currentColor"
                                        d="M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z">
                                    </path>
                                </svg><!-- <i class="fas fa-phone-alt"></i> --></span>
                            <p>1900.636.099</p>
                        </div>
                        <div class="d-flex">
                            <span class="mr-2"><svg class="svg-inline--fa fa-blender-phone fa-w-18" aria-hidden="true"
                                    focusable="false" data-prefix="fas" data-icon="blender-phone" role="img"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg="">
                                    <path fill="currentColor"
                                        d="M392 64h166.54L576 0H192v352h288l17.46-64H392c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h114.18l17.46-64H392c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h140.36l17.46-64H392c-4.42 0-8-3.58-8-8V72c0-4.42 3.58-8 8-8zM158.8 335.01l-25.78-63.26c-2.78-6.81-9.8-10.99-17.24-10.26l-45.03 4.42c-17.28-46.94-17.65-99.78 0-147.72l45.03 4.42c7.43.73 14.46-3.46 17.24-10.26l25.78-63.26c3.02-7.39.2-15.85-6.68-20.07l-39.28-24.1C98.51-3.87 80.09-.5 68.95 11.97c-92.57 103.6-92 259.55 2.1 362.49 9.87 10.8 29.12 12.48 41.65 4.8l39.41-24.18c6.89-4.22 9.7-12.67 6.69-20.07zM480 384H192c-35.35 0-64 28.65-64 64v32c0 17.67 14.33 32 32 32h352c17.67 0 32-14.33 32-32v-32c0-35.35-28.65-64-64-64zm-144 96c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z">
                                    </path>
                                </svg><!-- <i class="fas fa-blender-phone"></i> --></span>
                            <p>1900.636.099</p>
                        </div>
                        <div class="d-flex">
                            <span class="mr-2"><svg class="svg-inline--fa fa-paper-plane fa-w-16" aria-hidden="true"
                                    focusable="false" data-prefix="fas" data-icon="paper-plane" role="img"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                    <path fill="currentColor"
                                        d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z">
                                    </path>
                                </svg><!-- <i class="fas fa-paper-plane"></i> --></span>
                            <p>hi@NongsanViet.com</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="text-footer">
                        <h4>Fanpage</h4>
                        <div>
                            <iframe
                                src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FN%25C3%25B4ng-S%25E1%25BA%25A3n-Vi%25E1%25BB%2587t-OrFar%20m-110915468100836&tabs=timeline&width=280&height=500&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId=5834788679872299"
                                width="340" height="130" style="border:none;overflow:hidden" scrolling="no"
                                frameborder="0" allowfullscreen="true"
                                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom-footer mb-3">
            <div class="row">
                <div class="col ">
                    <ul class="ft-bottom container">
                        <li class="copy-right">
                            <p style="font-size: 14px;">Copyright © 2021 orfarm organic. Powered by OrFarm</p>
                        </li>
                        <li class="social-media">
                            <a href="">
                                <i class="fas fa-phone-square-alt"></i>
                            </a>
                            <a href="">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="">
                                <i class="fab fa-pinterest-p"></i>
                            </a>
                            <a href="">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </li>
                    </ul>

                </div>
            </div>
        </div>
    </footer>
<!--        Modal-->
<input type="text" class="d-none" th:value="${msg}" id="msg">
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Thông báo</h4>
            </div>
            <div class="modal-body">
                <p th:text="${msg}">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
<th:block th:insert="~{header :: script}"></th:block>
    <!--====== Main js ======-->
    <script src="assets/js/main.js"></script>
    <script src="./cart.js"></script>
    <script language='javascript' type='text/javascript'>
        function check(input) {
            if (input.value != document.getElementById('password').value) {
                input.setCustomValidity('Password Must be Matching.');
            } else {
                // input is valid -- reset the error message
                input.setCustomValidity('');
            }
        }
    </script>
    <script>

        document.getElementById("btn-edit").onclick = function () {

            document.querySelector(".personal-infor .hidden-edit").style.display = 'block';
            document.querySelector(".personal-infor .hidden-edit").style.margin = '0 0 0 22%';
            document.querySelector(".personal-infor .name-infor").style.padding = '0 0 0 20%';
            document.querySelector(".personal-infor table .display-userName").style.display = 'none';
            document.querySelector(".personal-infor #btn-edit").style.display = 'none';
            document.querySelector(".personal-infor .filed-phone").style.display = 'none';

            document.querySelector(".personal-infor .filed-address").style.display = 'none';
        };
        document.querySelector(".exit").onclick = function () {

            document.querySelector(".personal-infor .hidden-edit").style.display = 'none';
            document.querySelector(".personal-infor table .display-userName").style.display = 'block';
            document.querySelector(".personal-infor .name-infor").style.padding = '0 0 0 0';
            document.querySelector(".personal-infor #btn-edit").style.display = 'block';
            document.querySelector(".personal-infor .filed-phone").style.display = 'block';

            document.querySelector(".personal-infor .filed-address").style.display = 'block';
        };
        document.getElementById("btn-edit-2").onclick = function () {

            document.querySelector(".personal-infor .hidden-pass").style.display = 'block';
            document.querySelector(".personal-infor .hidden-pass").style.margin = '0 0 0 22%';
            document.querySelector(".personal-infor .pass-infor").style.padding = '0 0 0 43%';
            document.querySelector(".personal-infor table .display-userName-3").style.display = 'none';
            document.querySelector(".personal-infor #btn-edit-2").style.display = 'none';
        };
        document.querySelector(".exit-pass").onclick = function () {
            document.querySelector(".personal-infor .hidden-pass").style.display = 'none';
            document.querySelector(".personal-infor table .display-userName-3").style.display = 'block';
            document.querySelector(".personal-infor .pass-infor").style.padding = '0 0 0 24%';
            document.querySelector(".personal-infor #btn-edit-2").style.display = 'block';
        };
    </script>
<script>
    (function(){
        const value =  document.getElementById('msg')?.value;
        if(value) {
            setTimeout(() => {
                $('#myModal').modal('show');
            },300)
        }
    })()
</script>

</body>

</html>